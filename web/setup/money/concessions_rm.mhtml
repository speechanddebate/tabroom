<%args>
	$account
	$tourn
	$item_id
	$certain => undef
</%args>
<%init>

	my $item = Tab::Item->retrieve($item_id); 

	if ($certain eq "I am certain") { 

		foreach my $order ($item->purchases) { 
			$order->delete();
		}

		$item->delete;
		$m->redirect("concessions.mhtml");

	} 
	
</%init>

<&  "/funclib/warning.mas", account => $account &>

<br><br>
<br><br>
<center>
<P><b>
You are about to permanently delete the concession item <% $item->name %>,
together with all the orders for it.
</b></p> 

<p>This cannot be undone.  You can only get it back by re-entering it again.
That includes all the judge item assignments and round assignments.  They will
be gone, baby, gone.  </p>

<p>Don't come crying to me, and don't say I didn't warn you.</p>
<p>Because I did.  Right now</p>

% if ($certain) {

<p><font color="red">You did not type "I am certain", exactly like that.  Try
again</font></p>

% }

<br><br>
<p>To proceed, type "I am certain", exactly like that, in the box below:</p>
<br><br>
<form action="concessions_rm.mhtml" method="post">
<input type="hidden" value="<% $item_id %>" name="item_id">

<p align="center">
<input type="text" value="" name="certain">
</p>

<p align="center">
<input  type="submit" value="Delete Item <% $item->name %>"></p>
</center>
</form>
