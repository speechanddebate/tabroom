<%args>
	$person
	$event_id
	$tourn
	$fire_as_function => undef
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id);

	if ($event) {

		my $description = "User ".$person->first." ".$person->last." has deleted event ".$event->id." ".$event->name;

		$m->comp("/funclib/log.mas",
			type        => 'tabbing',
			event       => $event->id,
			tourn       => $tourn->id,
			person      => $person->id,
			description => $description
		);

		$event->delete();

	}

	return if $fire_as_function;

	$m->redirect("/setup/events/edit.mhtml");

</%init>
