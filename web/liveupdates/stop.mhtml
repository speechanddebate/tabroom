<%args>
	$type
	$email => undef
	$cell => undef
	$tourn_id => undef
</%args>
<%init>

	if ($type eq "email" || $type eq "both") { 

		my @comps = Tab::FollowComp->search( email => $email );
		my @judges = Tab::FollowJudge->search( email => $email );

		foreach (@comps, @judges) { 
			$_->delete;
		}

	}

	if ($type eq "cell" || $type eq "both") { 

		my @comps = Tab::FollowComp->search( cell => $cell );
		my @judges = Tab::FollowJudge->search( cell => $cell );

		foreach (@comps, @judges) { 
			$_->delete;
		}

	}

	my $msg = "You are no longer getting texts to ".$cell." <br />" if $cell;
	$msg .= "You are no longer getting emails to ".$email." <br />" if $email;

	$m->redirect("/index/tourn/updates/index.mhtml?tourn_id=$tourn_id&msg=$msg") if $tourn_id;
	$m->redirect("/liveupdates/index.mhtml?msg=$msg");

</%init>
