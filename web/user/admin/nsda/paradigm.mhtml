<%args>
	$person
	$person_settings
</%args>
<%init>

	$m->abort unless $person->site_admin;

	my $paradigm_guidelines = Tab::TabroomSetting->search(
		tag   => "paradigm_guidelines"
	)->first;

	my $review_start = Tab::TabroomSetting->search(
		tag   => "paradigm_review_start"
	)->first;

	my $word_limit = Tab::TabroomSetting->search(
		tag   => "paradigm_word_limit"
	)->first;

	my $word_limit_deadline = Tab::TabroomSetting->search(
		tag   => "paradigm_word_limit_deadline"
	)->first;

	my $word_limit_guidelines = Tab::TabroomSetting->search(
		tag   => "paradigm_word_limit_guidelines"
	)->first;

	my $paradigm_button_name = Tab::TabroomSetting->search(
		tag   => "paradigm_button_name"
	)->first;

	my $paradigm_button_url = Tab::TabroomSetting->search(
		tag   => "paradigm_button_url"
	)->first;

	my $start;

	if ($review_start) {
		$start = $review_start->value_date;
	}

	my $review_cutoff = Tab::TabroomSetting->search(
		tag   => "paradigm_review_cutoff"
	)->first;

	my $cutoff;

	if ($review_cutoff) {
		$cutoff = $review_cutoff->value_date;
	}

</%init>

	<& ../menu.mas,
		whoami          => "paradigms",
		person          => $person,
		person_settings => $person_settings
	&>

	<& "/funclib/editor.mas", height => "256" &>

	<div class="main">

		<div class="flexrow">
			<span class="fourfifths">
				<h4>Paradigm Guidelines</h4>
			</span>

			<span class="fifth rightalign padright">
				<a
					class = "buttonwhite bluetext invert padright padleft"
					href  = "paradigm_log.mhtml"
				>Paradigm Log</a>
			</span>
		</div>

		<form
			action = "paradigm_save.mhtml"
			method = "post"
		>

		<div class="row flexrow">
			<span class="third marno padleft">
				Paradigm Button Text
			</span>

			<span class="sixth padvert">
				<input
					type  = "text"
					class = "notfirst"
					name  = "paradigm_button_name"
					id    = "paradigm_button_name"
					value = "<% $paradigm_button_name ? $paradigm_button_name->value : "" %>"
				>
			</span>

			<span class="third marno padleft">
				Paradigm Button URL
			</span>

			<span class="sixth padvert">
				<input
					type  = "url"
					class = "notfirst"
					name  = "paradigm_button_url"
					id    = "paradigm_button_url"
					value = "<% $paradigm_button_url ? $paradigm_button_url->value : "" %>"
				>
			</span>
		</div>

		<& "/funclib/editor.mas", id => "paradigm_guidelines" &>

		<div class="row flexrow">
			<span class="third marno padleft">
				Unpublish Paradigms On
			</span>

			<span class="sixth padvert">
				<input
					type  = "date"
					class = "notfirst"
					name  = "paradigm_review_cutoff"
					id    = "paradigm_review_cutoff"
					value = "<% $cutoff ? $cutoff->ymd : "" %>"
				>
			</span>

			<span class="third marno padleft">
				Unless they've been reviewed after
			</span>

			<span class="sixth padright padvertless">
				<input
					type  = "date"
					class = "notfirst"
					name  = "paradigm_review_start"
					id    = "paradigm_review_start"
					value = "<% $start ? $start->ymd : "" %>"
				>
			</span>
		</div>

		<div class="row centeralign">
			<h5 class="leftalign padleft">
				Guidelines for Paradigm Edit Page
			</h5>
			<span class="ninetenths">
				<textarea
					name = "paradigm_guidelines"
					id   = "paradigm_guidelines"
				><% $paradigm_guidelines ? $paradigm_guidelines->value_text : "" %></textarea>
			</span>
		</div>

		<div class="row flexrow">
			<span class="third marno padleft">
				Word Limit
			</span>

			<span class="sixth padright">
				<input
					type  = "number"
					class = "notfirst sizeme"
					name  = "paradigm_word_limit"
					id    = "paradigm_word_limit"
					value = "<% $word_limit ? $word_limit->value : "" %>"
				>
			</span>

			<span class="third marno padleft">
				Word Limit Deadline
			</span>

			<span class="sixth padright">
				<input
					type  = "date"
					class = "notfirst"
					name  = "paradigm_word_limit_deadline"
					id    = "paradigm_word_limit_deadline"
					value = "<% $word_limit_deadline ? $word_limit_deadline->value_date->ymd : "" %>"
				>
			</span>
		</div>

		<div class="row centeralign">
			<h5 class="leftalign padleft">
				Word Limit Guidelines
			</h5>
			<span class="ninetenths">
				<textarea
					name = "paradigm_word_limit_guidelines"
					id   = "paradigm_word_limit_guidelines"
				><% $word_limit_guidelines ? $word_limit_guidelines->value_text : "" %></textarea>
			</span>
		</div>

		<div class="liblrow rightalign">
			<span class="half centeralign">
				<input
					type  = "submit"
					class = "padvert"
					value = "Save Paradigm Settings"
				>
			</span>
		</div>

		</form>
	</div>

