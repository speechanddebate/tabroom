<%args>
	$round_id
	$return => undef
</%args>
<%init>

	my $round = Tab::Round->retrieve($round_id);

	my @panels = sort {$a->letter cmp $b->letter} $round->panels;

	foreach my $panel (@panels) { 
		my @rooms = $m->comp("/funclib/clean_rooms.mas", panel => $panel);
		my $room = shift @rooms;
		$panel->room($room->id) if $room;
		$panel->update;
	}

	my $msg = "Rooms have been assigned";

	$m->redirect("/panel/schemat/show.mhtml?round_id=$round_id&msg=$msg");


</%init>
