<%args>
	$league
	$tourn
	$err => undef
	$event_id
	$round_id => undef
	$submit => "Display"
</%args>

<%init>

my $event = Tab::Event->retrieve($event_id);

my @rounds = sort {$a->name cmp $b->name} $event->rounds unless $round_id;
push (@rounds, Tab::Round->retrieve($round_id)) if $round_id;

</%init>

% if ( $event->type eq "speech" || $event->type eq "congress") { 

		<h3><% $event->name %> Panels: <% $tourn->name %></h3>
		
<table cellpadding="3" cellspacing="0" width="100%">

% foreach my $round (@rounds) { 

%	my $start = $round->timeslot->start;
%	$start->set_time_zone($league->timezone);

	<tr><td colspan="15">
	<h4>Round <% $round->name %>
	<% ($round->label) ? $round->label : "" %> at <% $start->hour_12.":".$start->strftime('%M')." ".$start->strftime('%p') %></h4>
	</td></tr>

	<tr><th>Panel</th>
		<th>Room</th>
		<th>Judges</th>
		<th colspan="7">Competitors</th>
	</tr>

%	my $switch;
% 	foreach my $panel (sort {$a->letter cmp $b->letter} $round->panels) { 
%	$switch++;

	    <tr <% ($switch % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

		<th>
		<% $panel->letter %>
		</th>

		<td>
		<% ($panel->room) ? $panel->room->name : "" %>
		</td>	

		<td>
%	foreach my $judge ($panel->judges) { 
		<% $judge->code %>
% 	}
		</td>

% 	my @comps = $panel->comps unless $league->diocese_based;
%	@comps = $panel->comps_region if $league->diocese_based;

%	my $count;
% 	foreach my $comp (@comps) { 

%	if ($count == 7) {
		</tr><tr><td colspan="4"></td>
%		$count = 0;
%	}

	<td>
		<% $comp->code %> 
	</td>

%	$count++;

%	} # end of foreach comp

</tr>

%	} #end of foreach panel  

%	} #end of foreach round

	</table>

%   } #end of if event type is speech or congress


% if ($event->type eq "debate") { 

% }   # end of if debate 
