<%args>
	$tourn
	$account
	$group_id => undef
</%args>
<%init>

	my $group = Tab::JudgeGroup->retrieve($group_id) if $group_id;
	my $switch;
	my $whoami = "index" if $group;


</%init>

	<& sidebar.mas, tourn => $tourn, group => $group, whoami => $whoami &>


	<div class="left huge">

		<h2>Judges & Pools <% $group ? "in ".$group->abbr : "" %></h2>

%		if ($group) { 

%			my @timeslots = $m->comp("/funclib/group_timeslots.mas", group => $group);

			<table cellpadding="4" cellspacing="1">

				<tr class="yellowrow">
					<th colspan="4" class="smallish">
						Vital Statistics:
					</th>
				</tr>

				<tr class="evenrow">
					<td>
						Events/Divisions
					</td>

					<td>
						<% scalar $group->events %>
					</td>

					<td>
						Panels/Rooms
					</td>

					<td>
						<% scalar $m->comp("/funclib/group_panels.mas", group => $group) %>
					</td>
				</tr>

				<tr class="evenrow">

					<td>
						Max judges needed at one time
					</td>

					<td>
						<% $m->comp("/funclib/group_max_judges.mas", group => $group) %>
					</td>

					<td>
						Timeslots
					</td>

					<td>
						<% scalar @timeslots %>
					</td>

				</tr>

			</table>

			<br />

			<table cellpadding="4" cellspacing="1">

				<tr class="yellowrow">
					<th colspan="2" class="smallish">
						Repanel judge assignments:
					</th>
				</tr>


				<tr style="padding-top: 25px;" class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

					<td class="rightalign">
						<label for="clear">
						Erase existing assignments:
						</label>
					</td>
					
					<td>
						<form action="group_judges.mhtml" method="post">
						<input type="hidden" name="group_id" value="<% $group->id %>">
						<input type="checkbox" style="check" id="clear" name="clear" value="1" checked="checked">
					</td>

				</tr>

				<tr class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

					<td class="rightalign">
						Minimum judges per panel*
					</td>
					
					<td>
						<input type="number" min="1" max="99" size="5" name="panelsize" value="1">
					</td>

				</tr>


				<tr class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

					<td class="rightalign">
						Timeslot
					</td>
					
					<td>
						<select name="timeslot_id" class="fixedmed">
							<option value="all">All</option>
%							foreach my $timeslot (@timeslots) { 
								<option value="<% $timeslot->id %>"><% $timeslot->name %></option>
%							}
						</select>
					</td>

				</tr>

				<tr class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

					<td class="rightalign">
						Round Type
					</td>
					
					<td>
						<select name="round_type" class="fixedmed">
							<option value="all">All</option>
							<option value="prelim">Prelim</option>
							<option value="elim">Elim</option>
							<option value="final">Final</option>
						</select>
					</td>

				</tr>

				<tr class="liblrow">
					<td colspan="2" class="rightalign">
						<input type="submit" value=" Reassign Judges ">
						</form>
					</td>
				</tr>


			</table>

			<p class="explain">* You can set numbers of judges for each event if you click on "Pools & Setup" on the right."</p>

%		}

	</div>



