<%args> 
	$account
	$circuit
	$news_id
	$certain => undef
</%args> 
<%init>

my $news = Tab::News->retrieve($news_id);

if ($certain eq "I am certain" ) { 

	my $err;
	$err = "News ". $news->title ." has been deleted ";

	system "/bin/rm -rf $Tab::file_root/files/". $circuit->id ."/articles/". $news->id;

	$news->delete;
	$m->redirect("$Tab::url_prefix/circuit/website.mhtml?err=$err");
}

</%init>

<&  "/funclib/warning.mas", account => $account &>

<h3></h3>
<p></p>
<br><br>
<br><br>
<center>

<P><B>You are about to permanently delete news article <% $news->title %>

% if ($news->file) { 
, along with the attached file <% $news->file %>.
% }

</b></p>

<p>This cannot be undone.  You can only get it back by re-entering the
article over again.  </p>

<p>Don't say I didn't warn you.</b></p>

% if ($certain) {

<p><font color="red">You did not type "I am certain", exactly like that.  Try
again</font></p>

% }

<br><br>
<p>To proceed, type "I am certain" in the box below:</p>
<br><br>
<form action="news_rm.mhtml" method="post">
<input type="hidden" value="<% $news_id %>" name="news_id">
<p align="center">
<input type="text" name="certain" size="20"></p>
<p align="center">
<input  type="submit" value="Delete News"></p>
</center>
</form>
