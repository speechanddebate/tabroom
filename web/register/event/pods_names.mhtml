<%args>
	$event_id
	$tourn
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id);

	unless ($event->setting("round_robin")) {
		$m->print("Pods only make sense for round robins.");
		$m->abort;
	}

	my @entries = Tab::Entry->search(
		event  => $event->id,
		active => 1
	);

	my $pods;

	foreach my $entry (@entries) {

		my $pod = $entry->setting("pod");
		next if (not defined $pod);
		next if $pods->{$pod};

		$pods->{$entry->setting("pod")} = $ARGS{$pod};
	}

	$event->setting("pods", "json", $pods);
	$m->redirect("pods.mhtml?event_id=$event_id");

</%init>
