<%args>
	$tourn
	$account
	$panel_id => undef
	$judge_id
</%args>
<%init>

	my $panel = Tab::Panel->retrieve($panel_id) if $panel_id;
	$m->abort unless $panel;

	foreach my $entry ($m->comp('/funclib/panel_entries.mas', panel => $panel)) { 

		Tab::debuglog("Panel id was $panel_id Judge is $judge_id entry is $entry");
		my $ballot = Tab::Ballot->search( judge => $judge_id, entry => $entry->id, panel => $panel_id )->first;

		foreach my $value ($ballot->ballot_values) {

			if ($value->tag eq "" && $ARGS{$value->id}) { 
				$value->tag($ARGS{$value->id});
				$value->update;
			}
		}
	}

	my $msg = "Panel scores corrected";

	$m->redirect("panel.mhtml?panel_id=$panel_id&judge_id=$judge_id");

</%init>
                    	
