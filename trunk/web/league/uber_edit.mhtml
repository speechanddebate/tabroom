<%args>
	$circuit
	$newbie => undef
	$account
	$uber_id => undef
	$chapter_id => undef;
	$from => undef;
</%args>
<%init>

	my $uber = Tab::Uber->retrieve($uber_id) if $uber_id;

	my $chapter = Tab::Chapter->retrieve($chapter_id) if $chapter_id;

	$chapter = $uber->chapter unless $chapter;


</%init>

	<div class="left huge">

		<& /user/tabbar.mas, chapter => $chapter, whoami => "judges" &>

%		if ($uber) {
			<h2>Edit <%$uber->first." ".$uber->last %></h2>
% 		} else { 
			<h2>Create new Judge</h2>
% 		}

%		if ($newbie) { 

			<p>You now should add the judge names for your team into your
			judging roster by adding their information below.</p>
			
			<p>You only have to add each judge once for their entire
			forensics career; you can then look up a record of how
			many times a given judge has judged, where, in what divisions
			and so on.</p>

			<p>Begin by adding the first judge below.</p>

			<hr />

%		}


%		my $switch;

		<table cellpadding="5" cellspacing="1" width="100%" >

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					First Name:
				</td>

				<td>
					<form action="uber_save.mhtml" method="post">
					<input type="hidden" name="uber_id" value="<% ($uber) ? $uber->id : "" %>">
					<input type="hidden" name="chapter_id" value="<% $chapter->id %>">
					<input type="hidden" name="from" value="<% $from %>">
					<input type="text" name="first" size="30" value="<% ($uber) ? $uber->first : "" %>">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	
				<td>
					Last Name:
				</td>

				<td>
					<input type="text" name="last" size="30" value="<% ($uber) ? $uber->last : ""%>">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Cell Phone #:
				</td>

				<td>
					<input type="text" name="cell" size="15" value="<% ($uber) ? $uber->cell : ""%>">
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Started Judging in (year):
				</td>

				<td>
					<input type="text" name="started" size="6" value="<% ($uber) ?   $uber->started : ""%>">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Set Inactive?:
				</td>

				<td>
					<input type="checkbox" name="retired" value="1" <% ($uber) ?  ($uber->retired) ? 'checked' : '': "" %> >
				</td> 

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Gender:
				</td>

				<td>
					<input type="radio" name="gender" value="M" <% ($uber) ? ($uber->gender eq "M") ? "checked" : "" : "" %>> Male
					<input type="radio" name="gender" value="F" <% ($uber) ? ($uber->gender eq "F" ) ? "checked" : "" : "" %>> Female
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Notes:
				</td>

				<td>
					<input type="text" size="30" name="notes" value="<% ($uber) ? $uber->notes : "" %>">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td colspan="2">
					Debate Judge Paradigm (link or text):
				</td>

			</tr>

			<tr>
				<td colspan="2" align="center">
					<textarea name="paradigm" rows="5" cols="55"><% ($uber) ? $uber->paradigm : "" %></textarea>
				</td>
			</tr>

			<tr class="liblrow">
				<td>
					<input class="blue" type="submit" value="  Save Judge & Return to Roster ">
				</td>

				<td align="right">
					<input class="blue" type="submit" name="twitch" value="  Save Judge and Add Another ">
					</form>
				</td>
			</tr>

		</table>

	</div>

	<div id="rightsmall">

%		if ($uber) {
			<h4><% $uber->last %> Judge Record:</h4>
%			foreach my $judge ($uber->judges) { 
				<a class="blue block"><% $judge->judge_group->abbr %> at <% $judge->judge_group->tournament->name %></a>
%			}	

		<hr>
%		}

		<& /user/menu.mas, chapter => $chapter, account => $account &>

	</div>
