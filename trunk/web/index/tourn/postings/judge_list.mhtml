<%args>
	$account => undef
	$group_id => undef
	$tourn_id => undef
</%args>
<%init>

	my $group = Tab::JudgeGroup->retrieve($group_id) if $group_id;  
	my $tourn = $group->tourn if $group;
	$tourn = Tab::Tourn->retrieve($tourn_id) unless $tourn;

	$m->abort unless $tourn;
	$m->abort unless $group;

	my $switch;

	use POSIX;

</%init>

	<& menu.mas, tourn_id => $tourn->id, group_id => $group_id &>

	<div class="main">
		
		<& /index/tourn/title.mas, tourn => $tourn &>

        <& /index/tourn/tabbar.mas, tourn => $tourn, account => $account &>

%		my @judges = sort {$a->last cmp $b->last} $group->judges( active => 1);
%		my $total = scalar @judges;
%		my $count;

		<h4><% $group->abbr %> judge data</h4>

		<div style="width: 13em; float: left; margin-left: 15px;">

%			foreach my $judge (@judges) {

%				next unless $judge->active;

%				if ($count == ceil($total/3)) {
%					undef $count;
					</div>
					<div style="width: 13em; float: left; margin-left: 15px;">
%				}

%				$count++;

				<a class="smallish blue block nowrap white" href="judge.mhtml?judge_id=<% $judge->id %>&tourn_id=<% $tourn->id %>">
					<span class="evensmallerspan padno">	
						<% $judge->code %>
					</span>
					<% $judge->first." ".$judge->last %> 
				</a>

%			}

		</div>

	</div>


