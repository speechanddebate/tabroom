<%args>
	$pool_id
	$tourn_id
</%args>
<%init>

	my $pool = Tab::Pool->retrieve($pool_id);
		
	unless ($pool && $pool->publish) { 
		$m->print("This pool was not published.  Stop messing around");
		$m->abort;
	}

	#load in round assignments for judges in pool
		
	my @rounds = Tab::Round->search( pool => $pool_id );

	my %judge_use;
	
	foreach my $round (@rounds) {
	
		my @judges = $m->comp("/funclib/round_judges.mas", round => $round);
		
		foreach my $judge (@judges) {
			
			if ($round->label)  {
				$judge_use{$judge->id} .= $round->label;
			} else {
				$judge_use{$judge->id} .= $round->name;
			}
		}
		
	}
	
	my $switch = 1;

</%init>

	<div class="left huge">

		<h2>Judges called for <% $pool->name %></h2>

		<table cellpadding="5" cellspacing="1" width="100%">

%			foreach my $judge (sort {$a->last cmp $b->last} $pool->judges) { 

				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>	

					<td>
						<% $judge->code %>
					</td>

					<td>
						<% $judge->first." ".$judge->last %>
					</td>

					<td>
						<% ($judge->school->id) ? $judge->school->name : "Hired" %>
					</td>

					<td>
%						if ($judge_use{$judge->id}) {
% 							$m->print ( $judge_use{$judge->id} );
%						} else {
%							$m->print ( "Standby" );
%						}
					</td>

				</tr>

%			}

		</table>

	</div>

	<& sidebar.mas, tourn_id => $tourn_id, pool_id => $pool_id &>


