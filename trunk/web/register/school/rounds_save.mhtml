<%args>
	$rounds => undef
	$judge_id
</%args>
<%init>

	my $judge = Tab::Judge->retrieve($judge_id);
	
	my $max = $judge->judge_group->setting("max_rounds");

	my $err;

	if ($rounds > $max) { 
		$rounds = $max;
		$err = "You assigned more than the maximum number of rounds to that judge.  Reduced to $max";
	}

	$judge->obligation($rounds);
	$judge->update;

	$m->redirect("judges.mhtml?group_id=".$judge->judge_group->id."&school_id=".$judge->school->id."&err=$err");


</%init>
