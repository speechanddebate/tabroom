<%args>
	$circuit
	$full => undef
</%args>
<%perl>

	if ($full) { 

  	  Tab::Chapter->set_sql(by_circuit => "
    	    select distinct chapter.* 
    	    from chapter, chapter_circuit
    	    where chapter.id = chapter_circuit.chapter
    	    and chapter_circuit.circuit = ?
			and chapter_circuit.full_member = 1
    	    order by chapter.name");

		return Tab::Chapter->search_by_circuit($circuit->id);

	} else { 

	    Tab::Chapter->set_sql(by_circuit => "
	        select distinct chapter.* 
	        from chapter, chapter_circuit
	        where chapter.id = chapter_circuit.chapter
	        and chapter_circuit.circuit = ?
	        order by chapter.name");
	
		return Tab::Chapter->search_by_circuit($circuit->id);

	}

</%perl>
