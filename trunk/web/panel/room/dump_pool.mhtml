<%args> 
	$account
	$tourn
	$certain => undef
</%args>
<%init>

	if ($certain eq "I am certain") { 

		my $count;

		Tab::RoomGroupRoom->set_sql( clobber_rooms => 
			"delete room_group_room.*
			from room_group_room, room_group
			where room_group.tourn = ? 
			and room_group.id = room_group_room.room_group"
		);

		Tab::RoomGroupRoom->sql_clobber_rooms->execute($tourn->id);

		my $msg = "Room pool assignments have been deleted";

		$m->redirect("/setup/rooms/list.mhtml?msg=$msg");

	}

	my $err = "You did not type I am certain.  Try again" if $certain;

</%init>

    <div class="blankfull centeralign">

        <&  "/funclib/warning.mas", account => $account &>

		<p class="err"><% $err %></p>

        <h5 class="warning">You are about to permanently erase your room pool assignments for <% $tourn->name %></h5>

		<p>
			This cannot be undone.  You can only get it back by re-entering it
			again.  You can't get them back.  Don't come crying to me.
		</p>
		
		<p>
			Don't say I didn't warn you.
		</p>

		<p>
			To proceed, type "I am certain" in the box below:
		</p>

		<p>
			<form action="dump_pool.mhtml" method="post">
			<input type="text" name="certain" size="20">
		</p>

		<p>
			<input  type="submit" value="Delete Room Pools">
			</form>
		</p>

    </div>
	

