<%args>
	$pool_id  => undef
	$round_id => undef
	$return   => undef
</%args>
<%init>

	my $existing = Tab::RoomGroupRound->search( round => $round_id, room_group => $pool_id )->first;

	Tab::debuglog("Round $round_id Pool $pool_id");

	if ($round_id && $pool_id) { 

		unless ($existing) { 

			Tab::RoomGroupRound->create({
				round => $round_id,
				room_group => $pool_id
			});
		}

	} else { 

		$existing->delete if $existing;
	}


	my $msg = "Round will now draw from this room pool";
	$m->redirect("pool.mhtml?pool_id=$pool_id&msg=$msg") if $return;
	$m->redirect("edit_pools.mhtml?msg=$msg");


</%init>
