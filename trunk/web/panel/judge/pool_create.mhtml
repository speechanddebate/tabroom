<%args>
	$tourn
	$name             => undef
	$publish          => undef
	$group_id         => undef
	$standby          => undef
	$standby_timeslot => undef
	$site             => undef
</%args>
<%init>

	my $msg;

	if ($name) { 

		unless ($site) { 
			my @sites = $tourn->sites;
			$site = shift @sites if @sites; 
		}

		if ($site) { 

			Tab::Pool->create({
				name             => $name,
				site             => $site,
				judge_group      => $group_id,
				publish          => $publish,
				standby          => $standby,
				standby_timeslot => $standby_timeslot,
				registrant       => 0
			});

		}

		$msg = "Pool $name created";
	}

	$m->redirect("edit_pools.mhtml?group_id=$group_id&msg=$msg");


</%init>
