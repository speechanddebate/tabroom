<%args>
	$email
	$account
	$contact => 0
	$entry_only => 0
	$no_setup => 0
	$circuit_id
	$tourn_id
</%args>
<%init>

	my $tourn = Tab::Tourn->retrieve($tourn_id);
	my @staff = Tab::Account->search( email => $email );

	unless (@staff) { 
		my $err = "That email address you tried to add doesn't have a corresponding account.  Please try again";
        $m->redirect("tourn_edit.mhtml?tourn_id=$tourn_id&err=$err");
	}

	my $access = Tab::TournAdmin->create({
		account    => $staff[0]->id,
		tourn      => $tourn->id,
		contact    => $contact,
		entry_only => $entry_only,
		no_setup   => $no_setup
	});

	my $msg = $staff[0]->first." ".$staff[0]->last." has been added to your tournament staff";

	$m->redirect("tourn_edit.mhtml?tourn_id=$tourn_id&circuit_id=$circuit_id&msg=$msg");

</%init>

