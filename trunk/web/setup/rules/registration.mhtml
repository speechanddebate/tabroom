<%args>
	$account
	$tourn
	$err => undef
</%args>
<%init>

	my $switch;

</%init>

	<& sidebar.mas, tourn => $tourn, chosen => "registration" &>

	<div class="main">
	
		<h2>Registration Settings</h2>

		<table cellpadding="7" cellspacing="1" width="95%" cellspacing="0" border="0">

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td  >
					<form action="registration_save.mhtml" method="post">
					<input type="hidden" name="tourn_id" value="<% $tourn->id %>">
					<label for="hidden">
					Hide this tournament from view (Test tournament)
					</label>
				</td>
				
				<td valign="top" width="10%" align="left">
					<input type="checkbox" id="hidden" name="hidden"  value="1"
					<% ($tourn->hidden == 1 ) ? "checked" : "" %> >
				</td>

			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td  >
					<label for="require_adult_contact">
						Require adult contact information before registration
					</label>
				</td>
				
				<td valign="top" width="10%" align="left">
					<input type="checkbox" id="require_adult_contact" name="require_adult_contact"  value="1"
					<% ($tourn->setting("require_adult_contact") == 1 ) ? "checked" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
			
				<td valign="top">
					<label for="track_reg_changes">
						Log registration changes
					</label>
				</td>
				
				<td valign="top" align="left">
					<input type="checkbox" id="track_reg_changes" name="track_reg_changes"  value="1"
					<% ($tourn->setting("track_reg_changes") == 1 ) ? "checked" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					<label for="publish_schools">
						Publish list of registered schools
					</label>
				</td>
		
				<td valign="top" align="left">
					<input type="checkbox" id="publish_schools" name="publish_schools"  value="1"
					<% ($tourn->setting("publish_schools") == 1 ) ? "checked" : "" %> >
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					<label for="overall_cap">
						Limit on total tournament entries
					</label>
				</td>
		
				<td valign="top" align="left">
					<input type="text" id="overall_cap" name="overall_cap" size="5" value="<% $tourn->setting("overall_cap") %>">
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
			
				<td valign="top">
					<label for="student_claim">
						Allow students to affiliate with entries without administrative approval (DO NOT check this unless you are absoluately sure you know what this does).
					</label>
				</td>
		
				<td valign="top" align="left">
					<input type="checkbox" id="student_claim" name="student_claim" size="5" value="1" <% $tourn->setting("student_claim") ? 'checked="checked"' : "" %>>
				</td>

			</tr>

%			if ($account->site_admin) { 
		
				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
			
					<td valign="top">
						<label for="ncfl">
							NCFL Nationals registration & options
						</label>
					</td>
			
					<td valign="top" align="left">
						<input type="checkbox" id="ncfl" name="ncfl" size="5" value="1" <% $tourn->setting("ncfl") ? 'checked="checked"' : "" %>>
					</td>
					
				</tr>

%			}
		
		
			<tr>
				<td colspan="4">
					<h4>Codes</h4>
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					<label for="hide_codes">
						Hide Speaker Codes from Registrants
					</label>
				</td>
		
				<td valign="top" align="left">
					<input id="hide_codes" type="checkbox" name="hide_codes"  value="1"
					<% ($tourn->setting("hide_codes") == 1 ) ? "checked" : "" %> >
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					School codes
				</td>
				
				<td valign="top" align="left">

					<select name="school_codes"> 
						<option value="incremental" <% $tourn->setting('school_codes') eq "incremental" ? "selected" : "" %> >
							Incremental (AA, AB, AC...)
						</option>
						<option value="circuit" <% $tourn->setting('school_codes') eq "circuit" ? "selected" : "" %> >
							Circuit codes
						</option>
						<option value="shortname" <% $tourn->setting('school_codes') eq "shortname" ? "selected" : "" %> >
							Shorten school name
						</option>
						<option value="registrant" <% $tourn->setting('school_codes') eq "registrant" ? "selected" : "" %> >
							Registrant choice
						</option>
						<option value="none" <% $tourn->setting('school_codes') eq "none" ? "selected" : "" %> >
							None
						</option>
					</select>
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					<label for="first_school_code">
					Incremental school codes start (eg, 1, 100, A, AA):
					</label>
				</td>
		
				<td valign="top" align="left">
					<input type="text" id="first_school_code" name="first_school_code" size="5" 
						value="<% $tourn->setting("first_school_code") %>">
				</td>
		
			</tr>
		
			<tr class="liblrow">
				<td colspan="2" class="rightalign">
					<input type="submit" value="Save Settings">
					</form>
				</td>
			</tr>
		

		</table>

	</div>
		
