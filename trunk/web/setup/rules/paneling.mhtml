<%args>
	$account
	$circuit
	$tourn
	$err => undef
</%args>
<%init>

	my $method = $tourn->method if $tourn->method;

	unless ($method && $method->id) { 
		$m->redirect("registration.mhtml");
	}

	my $switch;

</%init>

    <& sidebar.mas, circuit => $circuit, chosen => "paneling" &>

    <div class="left huge">

		<h2>Paneling Settings</h2>

		<table cellpadding="5" cellspacing="1" width="100%">
		
			<tr>
				<td colspan="4">
					<form action="paneling_save.mhtml" method="post">
					<h4>Competitors</h4>
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="center">
					Speech panel sizes
				</td>
		
				<td colspan="3" align="right">

					<div style="float: left; padding-right: 10px;" >
						Min
						<input type="text" size="5" name="min_panel_size" value="<% ($method) ? $method->min_panel_size : "" %>">
					</div>

					<div style="float: left; padding-right: 10px;" >
						Default
						<input type="text" size="5" name="default_panel_size" value="<% ($method) ? $method->default_panel_size : "" %>">
					</div>

					<div style="float: left;">
						Max
						<input type="text" size="5" name="max_panel_size" value="<% ($method) ? $method->max_panel_size : "" %>">
					</div>
				
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="center">
					Congress chamber sizes
				</td>
		
				<td colspan="3" align="right">

					<div style="float: left; padding-right: 10px;" >
						Min
						<input type="text" size="5" name="min_chamber_size" value="<% ($method) ? $method->min_chamber_size : "" %>">
					</div>

					<div style="float: left; padding-right: 10px;" >
						Default
						<input type="text" size="5" name="default_chamber_size" value="<% ($method) ? $method->default_chamber_size : "" %>">
					</div>
				
					<div style="float: left;">
						Max
						<input type="text" size="5" name="max_chamber_size" value="<% ($method) ? $method->max_chamber_size : "" %>">
					</div>

				</td>

			</tr>

		</table>

		<table cellpadding="5" cellspacing="1" width="100%">
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Elim round 
				</td>
				
				<td colspan="2" valign="top" align="right" >

					<select name="elim_method">
						<option value="snake" 
							<% ($method) ? ($method->elim_method eq "snake") ? "selected" : "" : "" %>>
							Strictly snake bracket
						</option>
		
						<option value="snake_school" 
							<% ($method) ? ($method->elim_method eq "snake_school") ? "selected" : "" : "" %>>
							Snake but adjust for schools by:
						</option>
			
						<option value="snake_school_force" 
							<% ($method) ? ($method->elim_method eq "snake_school_force") ? "selected" : "" : "" %>>
							Snake and force-adjust for schools
						</option>
		
						<option value="cfl"
							<% ($method) ? ($method->elim_method eq "cfl") ?  "selected" : "" : "" %>>
							NCFL Nationals
						</option>
					</select>

				</td>
		
				<td valign="top"  align="center">
				
					<select name="elim_method_basis">
		
						<option value="">
							None
						</option>
		
						<option value="seed" 
							<% ($method) ? ($method->elim_method_basis eq "seed") ? "selected" : "" : "" %>>
							Seed
						</option>
		
						<option value="prelim_cume" 
							<% ($method) ? ($method->elim_method_basis eq "prelim_cume") ? "selected" : "" : "" %>>
							Prelim Cume
						</option>
		
						<option value="overall_cume" 
							<% ($method) ? ($method->elim_method_basis eq "overall_cume") ? "selected" : "" : "" %>>
							Overall Cume
						</option>
					</select>

				</td>
			</tr>
		
		</table>
		
		<table cellpadding="5" cellspacing="1" width="100%">
		
			<tr>
				<td colspan="3">
					<h4>Judges</h4>
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Prevent judges from getting back to back rounds
				</td>
		
				<td valign="top" class="left">
					<input type="checkbox" name="no_back_to_back"  value="1"
					<% ($method) ? ($method->no_back_to_back == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
%			if ($circuit->diocese_based) { 
		
				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
					<td valign="top" >
						Disable diocese-based strikes
					</td>
		
					<td valign="top" class="left">
						<input type="checkbox" name="disable_region_strikes"  value="1"
						<% ($method) ? ($method->disable_region_strikes == 1) ? "checked" : "" : "" %> >
					</td>
		
				</tr>
		
%			}
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Judges may see the same event twice
				</td>
		
				<td valign="top" class="left">
					<input type="checkbox" name="judge_event_twice"  value="1"
					<% ($method) ? ($method->judge_event_twice == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Allow judges from the same school on a panel
				</td>
		
				<td valign="top"  align="left">
					<input type="checkbox" name="allow_school_panels"  value="1"
					<% ($method) ? ($method->allow_school_panels == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td valign="top" >
					Allow judges marked "neutral" to judge their own students
				</td>
			
				<td valign="top"  align="left"><input type="checkbox" name="allow_neutral_judges"  value="1"
					<% ($method) ? ($method->allow_neutral_judges == 1) ? "checked" : "" : "" %> >
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td valign="top" >
					All judges may judge their own students
				</td>

				<td valign="top"  align="left"><input type="checkbox" name="allow_judge_own"  value="1"
					<% ($method) ? ($method->allow_judge_own == 1) ? "checked" : "" : "" %> >
				</td>

			</tr>
		
			<tr class="liblrow">
			
				<td align="right" colspan="2">
					<input class="blue" type="submit" name="from" value="Save Settings" style="margin-right: 20px;">
					</form>
				</td>
			
			</tr>
			
		</table>

	</div>
