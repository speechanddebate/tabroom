<%args>
	$tourn
	$event_id
	$ballot_type              => "normal"
	$speaker_tbset            => undef
	$online_ballots           => 0
	$min_points               => 1
	$max_points               => 100
	$point_increments         => "whole"
	$no_lpw                   => undef
	$point_ties               => 0
	$round_robin              => 0
	$region_constraints       => 0
	$live_updates             => 0
	$omit_sweeps              => 0
	$allow_judge_own          => 0
	$no_first_years           => 0
	$panel_labels             => 0
	$pair_seeds               => 0
	$parli_ballot             => 0
	$separate_codes           => 0
	$points_later             => 0
	$truncate_fill            => 0
	$min_panel_size           => 0
	$max_panel_size           => 0
	$default_panel_size       => 0
	$elim_method              => 0
	$school_percent_limit     => 0
	$mavericks                => "nothing"
	$top_novice               => "none"
	$honorable_mentions       => 0
	$allow_repeat_judging     => 0
	$allow_repeat_elims       => 0
	$disallow_repeat_drop     => 0
	$allow_repeat_prelim_side => 0
	$avoid_school_hits        => 0
	$no_side_constraints      => 0
	$pullup_repeat            => 0
	$school_debates_self      => 0
	$pullup_method            => 0
	$powermatch               => 0
	$seed_presets             => 0
</%args>
<%init>

	my $tz = $tourn->tz;
	$tz = "UTC" unless $tz;

	my $event = Tab::Event->retrieve($event_id);

	$event->setting("ballot_type", $ballot_type);
	$event->setting("speaker_tbset", $speaker_tbset);
	$event->setting("online_ballots", $online_ballots);

	$event->setting("min_points", $min_points);
	$event->setting("max_points", $max_points);
	$event->setting("point_increments", $point_increments);
	$event->setting("no_lpw", $no_lpw);
	$event->setting("point_ties", $point_ties);
	$event->setting("round_robin", $round_robin);
	$event->setting("region_constraints", $region_constraints);
	$event->setting("seed_presets", $seed_presets);
	$event->setting("powermatch", $powermatch);
	$event->setting("pullup_method", $pullup_method);
	$event->setting("pullup_repeat", $pullup_repeat);
	$event->setting("school_debates_self", $school_debates_self);
	$event->setting("no_side_constraints", $no_side_constraints);
	$event->setting("live_updates", $live_updates);
	$event->setting("omit_sweeps", $omit_sweeps);
	$event->setting("allow_judge_own", $allow_judge_own);
	$event->setting("no_first_years", $no_first_years);
	$event->setting("panel_labels", $panel_labels);
	$event->setting("no_side_constraints", $no_side_constraints);
	$event->setting("live_updates", $live_updates);
	$event->setting("omit_sweeps", $omit_sweeps);
	$event->setting("allow_judge_own", $allow_judge_own);
	$event->setting("no_first_years", $no_first_years);
	$event->setting("panel_labels", $panel_labels);
	$event->setting("pair_seeds", $pair_seeds);
	$event->setting("live_updates", $live_updates);
	$event->setting("omit_sweeps", $omit_sweeps);
	$event->setting("allow_judge_own", $allow_judge_own);
	$event->setting("no_first_years", $no_first_years);
	$event->setting("panel_labels", $panel_labels);
	$event->setting("pair_seeds", $pair_seeds);
	$event->setting("parli_ballot", $parli_ballot);
	$event->setting("separate_codes", $separate_codes);
	$event->setting("points_later", $points_later);
	$event->setting("truncate_fill", $truncate_fill);

	$event->setting("allow_repeat_judging", $allow_repeat_judging);
	$event->setting("allow_repeat_elims", $allow_repeat_elims);
	$event->setting("disallow_repeat_drop", $disallow_repeat_drop);
	$event->setting("allow_repeat_prelim_side", $allow_repeat_prelim_side);
	$event->setting("avoid_school_hits", $avoid_school_hits);

	$event->setting("min_panel_size", $min_panel_size);
	$event->setting("max_panel_size", $max_panel_size);
	$event->setting("default_panel_size", $default_panel_size);
	$event->setting("elim_method", $elim_method);
	$event->setting("school_percent_limit", $school_percent_limit);

	$event->setting("top_novice", $top_novice);
	$event->setting("mavericks", $mavericks);
	$event->setting("honorable_mentions", $honorable_mentions);

	Tab::debuglog($event->setting("honorable_mentions")." off a fed value of $honorable_mentions");

	my $msg = "Tabulation settings saved";
	
	$m->redirect("tabbing.mhtml?event_id=".$event->id."&msg=$msg");
		
</%init>
