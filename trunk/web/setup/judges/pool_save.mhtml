<%args>
	$tourn
	$group_id
</%args>
<%perl>

	my $group = Tab::JudgeGroup->retrieve($group_id); 


	foreach my $jpool ($group->jpools) { 

		my $event_based = 0;
		$event_based = $ARGS{$jpool->id."_event_based"} if $ARGS{$jpool->id."_event_based"};

		$jpool->name($ARGS{$jpool->id."_name"});
		$jpool->site($ARGS{$jpool->id."_site"});
		$jpool->burden($ARGS{$jpool->id."_burden"});
		$jpool->publish($ARGS{$jpool->id."_publish"});
		$jpool->standby($ARGS{$jpool->id."_standby"});
		$jpool->event_based($event_based);
		$jpool->burden($ARGS{$jpool->id."_burden"});
		$jpool->registrant($ARGS{$jpool->id."_registrant"});
		$jpool->standby_timeslot($ARGS{$jpool->id."_timeslot"});
		$jpool->update;
	
	}

	if ($ARGS{"new_name"}) { 

		my $event_based = 0;
		$event_based = $ARGS{"new_event_based"} if $ARGS{"new_event_based"};

		my $jpool = Tab::JPool->create({ 
			judge_group      => $group_id,
			name             => $ARGS{"new_name"},
			standby          => $ARGS{"new_standby"},
			event_based      => $event_based,
			burden           => $ARGS{"new_burden"},
			publish          => $ARGS{"new_publish"},
			registrant       => $ARGS{"new_registrant"},
			standby_timeslot => $ARGS{"new_timeslot"},
			burden           => $ARGS{"new_burden"},
			site             => $ARGS{"new_site"}
		});

	}

	my $msg = "Pool settings saved ";

	$m->redirect("/setup/judges/pools.mhtml?group_id=".$group_id."&msg=".$msg);

</%perl>
