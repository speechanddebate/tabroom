<%args>
	$tourn
	$group_id
</%args>
<%perl>

	my $group = Tab::JudgeGroup->retrieve($group_id); 


	foreach my $pool ($group->pools) { 

		my $event_based = 0;
		$event_based = $ARGS{$pool->id."_event_based"} if $ARGS{$pool->id."_event_based"};

		$pool->name($ARGS{$pool->id."_name"});
		$pool->site($ARGS{$pool->id."_site"});
		$pool->burden($ARGS{$pool->id."_burden"});
		$pool->publish($ARGS{$pool->id."_publish"});
		$pool->standby($ARGS{$pool->id."_standby"});
		$pool->event_based($event_based);
		$pool->burden($ARGS{$pool->id."_burden"});
		$pool->registrant($ARGS{$pool->id."_registrant"});
		$pool->standby_timeslot($ARGS{$pool->id."_timeslot"});
		$pool->update;
	
	}

	if ($ARGS{"new_name"}) { 

		my $event_based = 0;
		$event_based = $ARGS{"new_event_based"} if $ARGS{"new_event_based"};

		my $pool = Tab::Pool->create({ 
			judge_group      => $group_id,
			name             => $ARGS{"new_name"},
			standby          => $ARGS{"new_standby"},
			event_based      => $event_based,
			burden           => $ARGS{"new_burden"},
			publish          => $ARGS{"new_publish"},
			registrant       => $ARGS{"new_registrant"},
			standby_timeslot => $ARGS{"new_timeslot"},
			burden           => $ARGS{"new_burden"},
			site             => $ARGS{"new_site"}
		});

	}

	my $msg = "Pool settings saved ";

	$m->redirect("/setup/judges/pools.mhtml?group_id=".$group_id."&msg=".$msg);

</%perl>
