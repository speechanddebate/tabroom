
delete a2.* from account a1, account a2 where a2.email = a1.email and a2.id > a1.id;
alter table account add constraint account_email UNIQUE(email);
alter table account add salt varchar(32);

alter table account_conflict add constraint uk_constraint UNIQUE(account,conflict,chapter,judge);
alter table account_setting add constraint uk_account_setting UNIQUE(account,tag);

delete b2.* from ballot b1, ballot b2 where b2.panel = b1.panel and b2.judge = b1.judge and b2.entry = b1.entry and b2.id > b1.id;
alter table ballot add constraint uk_ballots UNIQUE(judge,entry,panel);

delete bv2.* from ballot_value bv1, ballot_value bv2 where bv2.ballot = bv1.ballot and bv2.tag = bv1.tag and bv2.student = bv1.student and bv2.id > bv1.id;
alter table ballot_value add constraint uk_bv_scores UNIQUE(ballot,student,tag);

delete ca2.* from chapter_admin ca1, chapter_admin ca2 where ca1.chapter = ca2.chapter and ca1.account = ca2.account and ca1.id < ca2.id;
alter table chapter_admin add constraint uk_chapter_admin UNIQUE(chapter,account);

delete cc2.* from chapter_circuit cc1, chapter_circuit cc2 where cc1.chapter = cc2.chapter and cc1.circuit = cc2.circuit and cc1.id < cc2.id;
alter table chapter_circuit add constraint uk_chapter_circuit UNIQUE(chapter,circuit);

alter table circuit_admin add constraint uk_circuit_admin UNIQUE(circuit,account);

alter table circuit_setting add constraint uk_circuit_setting UNIQUE(circuit,tag);

delete es2.* from entry_student es1, entry_student es2 where es1.entry = es2.entry and es1.student = es2.student and es1.id < es2.id;

alter table entry_student add constraint uk_entry_student UNIQUE(entry,student);

delete es2.* from event_setting es1, event_setting es2 where es1.event = es2.event and es1.tag = es2.tag and es1.id < es2.id;
alter table event_setting add constraint uk_event_setting UNIQUE(event,tag);

delete jgs2.* from judge_group_setting jgs1, judge_group_setting jgs2 where jgs1.judge_group = jgs2.judge_group and jgs1.tag = jgs2.tag and jgs1.id < jgs2.id;
alter table judge_group_setting add constraint uk_judge_group_setting UNIQUE(judge_group,tag);

delete js2.* from judge_setting js1, judge_setting js2 where js1.judge = js2.judge and js1.tag = js2.tag and js1.id < js2.id;
alter table judge_setting add constraint uk_judge_setting UNIQUE(judge,tag);

delete rt2.* from rating rt1, rating rt2 where rt1.entry=139533 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=151754 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=157440 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=157441 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=157846 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=159073 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=187734 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=187771 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=189615 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=200144 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=200146 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=200490 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=200725 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=214930 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=218315 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=220105 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=244671 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=248462 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264433 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264457 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264587 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264617 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264892 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264897 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264905 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264907 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264909 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264925 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=264955 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=265023 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=265294 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=265640 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=266155 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=266178 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=266591 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=270228 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=272068 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=272690 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=281459 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=281460 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=281461 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=282229 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=282644 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=282646 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=283410 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=283730 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=284543 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=284593 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=287284 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=287285 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=287290 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=287414 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=291011 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=294516 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=294518 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=298975 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=298976 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=299373 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=306630 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=328306 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=328307 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=333321 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=333789 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345038 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345197 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345198 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345202 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345453 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345454 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345455 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345492 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345493 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345500 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345584 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345589 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=345947 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346020 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346210 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346266 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346318 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346319 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346355 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346422 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346423 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346433 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346434 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346435 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346524 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346721 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346778 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346779 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346865 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346936 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346940 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346941 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=346943 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347236 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347237 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347640 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347669 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347815 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347816 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347818 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347922 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=347978 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348010 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348078 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348081 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348260 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348494 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348529 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348553 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348554 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348555 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348581 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348583 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348611 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348739 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=348743 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=369622 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=384294 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=384295 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=391806 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=394471 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=397271 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=426954 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=426963 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=426964 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=426979 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427052 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427074 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427076 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427120 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427162 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427175 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427285 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427302 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427351 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427353 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427423 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427509 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427516 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427750 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427751 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427752 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427871 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=427992 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=428009 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=428108 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=432858 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=432866 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433405 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433407 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433410 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433418 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433419 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433420 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433421 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433422 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433426 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433427 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433429 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433431 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=433898 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=434085 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=434151 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=434152 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=434290 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=434418 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=435718 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=463165 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=463280 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=464569 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=465405 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=466239 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=466809 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467004 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467005 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467086 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467175 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467188 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467448 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=467450 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=471126 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=472281 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=493225 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=493226 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=496737 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=497159 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=497160 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=497252 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=497253 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=508332 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=511943 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=515286 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=515287 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=517162 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=517415 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=517416 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=517819 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=518057 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=519375 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=519377 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=519378 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=526498 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=527436 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=527438 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=527443 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=527444 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=536793 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=542378 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555249 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555502 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555583 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555690 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555691 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555692 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555720 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555804 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=555923 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556186 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556209 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556210 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556218 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556220 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556239 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=556922 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=560729 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563509 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563510 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563769 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563770 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563777 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563779 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563780 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563783 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563784 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563785 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563787 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563788 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563789 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563797 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563799 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=563802 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=564721 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=565248 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=565762 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=567545 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=567739 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=567740 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=567796 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=567939 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568018 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568019 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568020 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568023 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568026 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568058 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
delete rt2.* from rating rt1, rating rt2 where rt1.entry=568201 and rt2.entry = rt1.entry and rt1.judge = rt2.judge and rt1.id > rt2.id;
alter table rating add sheet int;
update rating set entry=null where entry=0;
alter table rating add constraint uk_entry_rating UNIQUE(judge,entry,sheet);
alter table rating add constraint uk_school_rating UNIQUE(judge,school,sheet);

delete ra2.* from region_admin ra1, region_admin ra2 where ra1.region = ra2.region and ra1.account = ra2.account and ra1.id < ra2.id;
alter table region_admin add constraint uk_region_admin UNIQUE(region,account);

update panel, room room1, room room2 set panel.room = room1.id where panel.room = room2.id and room1.site = room2.site and room1.name = room2.name and room1.id < room2.id;
delete room2.* from room room1, room room2 where room1.site = room2.site and room1.name = room2.name and room1.id < room2.id;
alter table room add constraint uk_room UNIQUE(site,name);

update panel, round round1, round round2 set panel.round = round1.id where panel.round = round2.id and round1.event = round2.event and round1.name = round2.name and round1.id < round2.id;
delete round2.* from round round1, round round2 where round1.event = round2.event and round1.name = round2.name and round1.id < round2.id;
alter table round add constraint uk_round UNIQUE(name,event);

update entry, school school1, school school2 set entry.school = school1.id where entry.school = school2.id and school1.tourn = school2.tourn 
	and school1.chapter = school2.chapter and school1.id < school2.id;
update judge, school school1, school school2 set judge.school = school1.id where judge.school = school2.id and school1.tourn = school2.tourn 
	and school1.chapter = school2.chapter and school1.id < school2.id;
delete school2.* from school school1, school school2 where school1.tourn = school2.tourn and school1.chapter = school2.chapter and school1.id < school2.id;
alter table school add constraint uk_school UNIQUE(chapter,tourn);

delete ta2.* from tourn_admin ta1, tourn_admin ta2 where ta1.tourn = ta2.tourn and ta1.account = ta2.account and ta1.id < ta2.id;
alter table tourn_admin add constraint uk_tourn_admin UNIQUE(tourn,account);

delete tc2.* from tourn_circuit tc1, tourn_circuit tc2 where tc1.tourn = tc2.tourn and tc1.circuit = tc2.circuit and tc1.id < tc2.id;
alter table tourn_circuit add constraint uk_tourn_circuit UNIQUE(tourn,circuit);

delete ts2.* from tourn_setting ts1, tourn_setting ts2 where ts1.tourn = ts2.tourn and ts1.tag = ts2.tag and ts1.id < ts2.id;
alter table tourn_setting add constraint uk_tourn_setting UNIQUE(tourn,tag);

